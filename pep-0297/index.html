
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <title>PEP 297 – Support for System Upgrades | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png"/>
    <link rel="canonical" href="https://peps.python.org/pep-0297.html" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/mq.css" type="text/css" />
    <link rel="stylesheet" href="../_static/dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="css-dark"/>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg" />
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark" />
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <meta name="description" content="Python Enhancement Proposals (PEPs)"/>
</head>
<body>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 297 – Support for System Upgrades</li>
            </ul>
            <button aria-label="Toggle dark mode" onClick="toggleColourScheme()"></button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 297 – Support for System Upgrades</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">PEP</dt>
<dd class="field-odd">297</dd>
<dt class="field-even">Title</dt>
<dd class="field-even">Support for System Upgrades</dd>
<dt class="field-odd">Author</dt>
<dd class="field-odd">mal&#32;&#97;t&#32;lemburg.com (Marc-André Lemburg)</dd>
<dt class="field-even">Status</dt>
<dd class="field-even">Rejected</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd">Standards Track</dd>
<dt class="field-even">Created</dt>
<dd class="field-even">19-Jul-2001</dd>
<dt class="field-odd">Python-Version</dt>
<dd class="field-odd">2.6</dd>
<dt class="field-even">Post-History</dt>
<dd class="field-even"><p></p></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Contents</summary><ul class="simple">
<li><a class="reference internal" href="#rejection-notice">Rejection Notice</a></li>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#problem">Problem</a></li>
<li><a class="reference internal" href="#proposed-solutions">Proposed Solutions</a></li>
<li><a class="reference internal" href="#scope">Scope</a></li>
<li><a class="reference internal" href="#credits">Credits</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="rejection-notice">
<h2><a class="toc-backref" href="#rejection-notice">Rejection Notice</a></h2>
<p>This PEP is rejected for failure to generate significant interest.</p>
</section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract">Abstract</a></h2>
<p>This PEP proposes strategies to allow the Python standard library
to be upgraded in parts without having to reinstall the complete
distribution or having to wait for a new patch level release.</p>
</section>
<section id="problem">
<h2><a class="toc-backref" href="#problem">Problem</a></h2>
<p>Python currently does not allow overriding modules or packages in
the standard library per default. Even though this is possible by
defining a <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> environment variable (the paths defined in
this variable are prepended to the Python standard library path),
there is no standard way of achieving this without changing the
configuration.</p>
<p>Since Python’s standard library is starting to host packages which
are also available separately, e.g. the distutils, email and PyXML
packages, which can also be installed independently of the Python
distribution, it is desirable to have an option to upgrade these
packages without having to wait for a new patch level release of
the Python interpreter to bring along the changes.</p>
<p>On some occasions, it may also be desirable to update modules of
the standard library without going through the whole Python release
cycle, e.g. in order to provide hot-fixes for security problems.</p>
</section>
<section id="proposed-solutions">
<h2><a class="toc-backref" href="#proposed-solutions">Proposed Solutions</a></h2>
<p>This PEP proposes two different but not necessarily conflicting
solutions:</p>
<ol class="arabic">
<li>Adding a new standard search path to <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>:
<code class="docutils literal notranslate"><span class="pre">$stdlibpath/system-packages</span></code> just before the <code class="docutils literal notranslate"><span class="pre">$stdlibpath</span></code>
entry. This complements the already existing entry for site
add-ons <code class="docutils literal notranslate"><span class="pre">$stdlibpath/site-packages</span></code> which is appended to the
<code class="docutils literal notranslate"><span class="pre">sys.path</span></code> at interpreter startup time.<p>To make use of this new standard location, distutils will need
to grow support for installing certain packages in
<code class="docutils literal notranslate"><span class="pre">$stdlibpath/system-packages</span></code> rather than the standard location
for third-party packages <code class="docutils literal notranslate"><span class="pre">$stdlibpath/site-packages</span></code>.</p>
</li>
<li>Tweaking distutils to install directly into <code class="docutils literal notranslate"><span class="pre">$stdlibpath</span></code> for the
system upgrades rather than into <code class="docutils literal notranslate"><span class="pre">$stdlibpath/site-packages</span></code>.</li>
</ol>
<p>The first solution has a few advantages over the second:</p>
<ul class="simple">
<li>upgrades can be easily identified (just look in
<code class="docutils literal notranslate"><span class="pre">$stdlibpath/system-packages</span></code>)</li>
<li>upgrades can be de-installed without affecting the rest
of the interpreter installation</li>
<li>modules can be virtually removed from packages; this is
due to the way Python imports packages: once it finds the
top-level package directory it stay in this directory for
all subsequent package submodule imports</li>
<li>the approach has an overall much cleaner design than the
hackish install on top of an existing installation approach</li>
</ul>
<p>The only advantages of the second approach are that the Python
interpreter does not have to changed and that it works with
older Python versions.</p>
<p>Both solutions require changes to distutils. These changes can
also be implemented by package authors, but it would be better to
define a standard way of switching on the proposed behaviour.</p>
</section>
<section id="scope">
<h2><a class="toc-backref" href="#scope">Scope</a></h2>
<p>Solution 1: Python 2.6 and up</p>
<p>Solution 2: all Python versions supported by distutils</p>
</section>
<section id="credits">
<h2><a class="toc-backref" href="#credits">Credits</a></h2>
<p>None</p>
</section>
<section id="references">
<h2><a class="toc-backref" href="#references">References</a></h2>
<p>None</p>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright">Copyright</a></h2>
<p>This document has been placed in the public domain.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/pep-0297.txt">https://github.com/python/peps/blob/main/pep-0297.txt</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/pep-0297.txt">2017-11-11 19:28:55 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <p id="toc-title">PEP 297 – Support for System Upgrades</p>
            <ul>
<li><a class="reference internal" href="#rejection-notice">Rejection Notice</a></li>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#problem">Problem</a></li>
<li><a class="reference internal" href="#proposed-solutions">Proposed Solutions</a></li>
<li><a class="reference internal" href="#scope">Scope</a></li>
<li><a class="reference internal" href="#credits">Credits</a></li>
<li><a class="reference internal" href="#references">References</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br />
            <a id="source" href="https://github.com/python/peps/blob/main/pep-0297.txt">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
</body>
</html>