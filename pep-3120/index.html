
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <title>PEP 3120 – Using UTF-8 as the default source encoding | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png"/>
    <link rel="canonical" href="https://peps.python.org/pep-3120.html" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/mq.css" type="text/css" />
    <link rel="stylesheet" href="../_static/dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="css-dark"/>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg" />
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark" />
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <meta name="description" content="Python Enhancement Proposals (PEPs)"/>
</head>
<body>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 3120 – Using UTF-8 as the default source encoding</li>
            </ul>
            <button aria-label="Toggle dark mode" onClick="toggleColourScheme()"></button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 3120 – Using UTF-8 as the default source encoding</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">PEP</dt>
<dd class="field-odd">3120</dd>
<dt class="field-even">Title</dt>
<dd class="field-even">Using UTF-8 as the default source encoding</dd>
<dt class="field-odd">Author</dt>
<dd class="field-odd">Martin von Löwis &lt;martin&#32;&#97;t&#32;v.loewis.de&gt;</dd>
<dt class="field-even">Status</dt>
<dd class="field-even">Final</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd">Standards Track</dd>
<dt class="field-even">Created</dt>
<dd class="field-even">15-Apr-2007</dd>
<dt class="field-odd">Python-Version</dt>
<dd class="field-odd">3.0</dd>
<dt class="field-even">Post-History</dt>
<dd class="field-even"><p></p></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Contents</summary><ul class="simple">
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#a-bit-of-history">A Bit of History</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="specification">
<h2><a class="toc-backref" href="#specification">Specification</a></h2>
<p>This PEP proposes to change the default source encoding from ASCII to
UTF-8. Support for alternative source encodings (<a class="pep reference internal" href="../pep-0263" title="PEP 263 – Defining Python Source Code Encodings">PEP 263</a>) continues to
exist; an explicit encoding declaration takes precedence over the
default.</p>
</section>
<section id="a-bit-of-history">
<h2><a class="toc-backref" href="#a-bit-of-history">A Bit of History</a></h2>
<p>In Python 1, the source encoding was unspecified, except that the
source encoding had to be a superset of the system’s basic execution
character set (i.e. an ASCII superset, on most systems).  The source
encoding was only relevant for the lexis itself (bytes representing
letters for keywords, identifiers, punctuation, line breaks, etc).
The contents of a string literal was copied literally from the file
on source.</p>
<p>In Python 2.0, the source encoding changed to Latin-1 as a side effect
of introducing Unicode. For Unicode string literals, the characters
were still copied literally from the source file, but widened on a
character-by-character basis. As Unicode gives a fixed interpretation
to code points, this algorithm effectively fixed a source encoding, at
least for files containing non-ASCII characters in Unicode literals.</p>
<p><a class="pep reference internal" href="../pep-0263" title="PEP 263 – Defining Python Source Code Encodings">PEP 263</a> identified the problem that you can use only those Unicode
characters in a Unicode literal which are also in Latin-1, and
introduced a syntax for declaring the source encoding. If no source
encoding was given, the default should be ASCII. For compatibility
with Python 2.0 and 2.1, files were interpreted as Latin-1 for a
transitional period. This transition ended with Python 2.5, which
gives an error if non-ASCII characters are encountered and no source
encoding is declared.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale">Rationale</a></h2>
<p>With <a class="pep reference internal" href="../pep-0263" title="PEP 263 – Defining Python Source Code Encodings">PEP 263</a>, using arbitrary non-ASCII characters in a Python file is
possible, but tedious. One has to explicitly add an encoding
declaration. Even though some editors (like IDLE and Emacs) support
the declarations of <a class="pep reference internal" href="../pep-0263" title="PEP 263 – Defining Python Source Code Encodings">PEP 263</a>, many editors still do not (and never
will); users have to explicitly adjust the encoding which the editor
assumes on a file-by-file basis.</p>
<p>When the default encoding is changed to UTF-8, adding non-ASCII text
to Python files becomes easier and more portable: On some systems,
editors will automatically choose UTF-8 when saving text (e.g. on Unix
systems where the locale uses UTF-8). On other systems, editors will
guess the encoding when reading the file, and UTF-8 is easy to
guess. Yet other editors support associating a default encoding with a
file extension, allowing users to associate .py with UTF-8.</p>
<p>For Python 2, an important reason for using non-UTF-8 encodings was
that byte string literals would be in the source encoding at run-time,
allowing then to output them to a file or render them to the user
as-is. With Python 3, all strings will be Unicode strings, so the
original encoding of the source will have no impact at run-time.</p>
</section>
<section id="implementation">
<h2><a class="toc-backref" href="#implementation">Implementation</a></h2>
<p>The parser needs to be changed to accept bytes &gt; 127 if no source
encoding is specified; instead of giving an error, it needs to check
that the bytes are well-formed UTF-8 (decoding is not necessary,
as the parser converts all source code to UTF-8, anyway).</p>
<p>IDLE needs to be changed to use UTF-8 as the default encoding.</p>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright">Copyright</a></h2>
<p>This document has been placed in the public domain.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/pep-3120.txt">https://github.com/python/peps/blob/main/pep-3120.txt</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/pep-3120.txt">2022-01-21 11:03:51 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <p id="toc-title">PEP 3120 – Using UTF-8 as the default source encoding</p>
            <ul>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#a-bit-of-history">A Bit of History</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br />
            <a id="source" href="https://github.com/python/peps/blob/main/pep-3120.txt">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
</body>
</html>