
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <title>PEP 542 – Dot Notation Assignment In Function Header | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png"/>
    <link rel="canonical" href="https://peps.python.org/pep-0542.html" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/mq.css" type="text/css" />
    <link rel="stylesheet" href="../_static/dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="css-dark"/>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg" />
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark" />
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <meta name="description" content="Python Enhancement Proposals (PEPs)"/>
</head>
<body>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 542 – Dot Notation Assignment In Function Header</li>
            </ul>
            <button aria-label="Toggle dark mode" onClick="toggleColourScheme()"></button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 542 – Dot Notation Assignment In Function Header</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">PEP</dt>
<dd class="field-odd">542</dd>
<dt class="field-even">Title</dt>
<dd class="field-even">Dot Notation Assignment In Function Header</dd>
<dt class="field-odd">Author</dt>
<dd class="field-odd">Markus Meskanen &lt;markusmeskanen&#32;&#97;t&#32;gmail.com&gt;</dd>
<dt class="field-even">Status</dt>
<dd class="field-even">Rejected</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd">Standards Track</dd>
<dt class="field-even">Created</dt>
<dd class="field-even">10-Feb-2017</dd>
<dt class="field-odd">Resolution</dt>
<dd class="field-odd"><a class="reference external" href="https://mail.python.org/pipermail/python-dev/2019-March/156695.html">Python-Dev</a></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract">Abstract</a></h2>
<p>Function definitions only allow simple function names to be used,
even though functions are assignable first class objects.</p>
<p>This PEP proposes adding support for assigning a function to
a class or instance attribute directly in the function
definition’s header by using the dot notation to separate
the object from the function’s name.</p>
<p>Although a similar feature, this PEP does not address general
assignment to anything that supports assignment, such as dict keys
and list indexes.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale">Rationale</a></h2>
<p>Currently if a function needs to be assigned to a class or instance
attribute, it requires an additional assignment statement to be made:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="o">...</span>

<span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>

<span class="c1"># Assign to class attribute</span>
<span class="n">MyClass</span><span class="o">.</span><span class="n">my_function</span> <span class="o">=</span> <span class="n">my_function</span>

<span class="c1"># Or assign to instance attribute</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">my_function</span> <span class="o">=</span> <span class="n">my_function</span>
</pre></div>
</div>
<p>While this isn’t usually an inconvenience, using dot notation to
assign directly in the function’s header would greatly simplify this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="o">...</span>

<span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>

<span class="c1"># Assign to class attribute</span>
<span class="k">def</span> <span class="nf">MyClass</span><span class="o">.</span><span class="n">my_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>

<span class="c1"># Or assign to instance attribute</span>
<span class="k">def</span> <span class="nf">my_instance</span><span class="o">.</span><span class="n">my_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>There are multiple reasons to use this functionality over
a standard class method, for example when the class is referenced
inside the function’s header (such as with decorators and typing).
This is also useful when an instance requires a callback attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Menu</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">select_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="n">items</span> <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_callback</span> <span class="o">=</span> <span class="n">select_callback</span>

<span class="n">my_menu</span> <span class="o">=</span> <span class="n">Menu</span><span class="p">([</span><span class="n">item1</span><span class="p">,</span> <span class="n">item2</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">my_menu</span><span class="o">.</span><span class="n">select_callback</span><span class="p">(</span><span class="n">item_index</span><span class="p">,</span> <span class="n">menu</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">menu</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="n">item_index</span><span class="p">])</span>
</pre></div>
</div>
<p>As opposed to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_menu</span> <span class="o">=</span> <span class="n">Menu</span><span class="p">([</span><span class="n">item1</span><span class="p">,</span> <span class="n">item2</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">select_callback</span><span class="p">(</span><span class="n">item_index</span><span class="p">,</span> <span class="n">menu</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">menu</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="n">item_index</span><span class="p">])</span>
<span class="n">my_menu</span><span class="o">.</span><span class="n">select_callback</span> <span class="o">=</span> <span class="n">select_callback</span>
</pre></div>
</div>
<p>Or defining them in an “unnatural” order:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">select_callback</span><span class="p">(</span><span class="n">item_index</span><span class="p">,</span> <span class="n">menu</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">menu</span><span class="o">.</span><span class="n">items</span><span class="p">[</span><span class="n">item_index</span><span class="p">])</span>

<span class="n">my_menu</span> <span class="o">=</span> <span class="n">Menu</span><span class="p">([</span><span class="n">item1</span><span class="p">,</span> <span class="n">item2</span><span class="p">],</span> <span class="n">select_callback</span><span class="p">)</span>
</pre></div>
</div>
<p>It reads better than the “unnatural” way, since you already know at
the time of the function definition what it’s goig to be used for.
It also saves one line of code while removing visual complexity.</p>
<p>The feature would also avoid leaving the function’s name into
the global namespace:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">eggs</span> <span class="o">=</span> <span class="s1">&#39;something&#39;</span>

<span class="k">def</span> <span class="nf">Spam</span><span class="o">.</span><span class="n">eggs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">Cheese</span><span class="o">.</span><span class="n">eggs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>

<span class="k">assert</span> <span class="n">eggs</span> <span class="o">==</span> <span class="s1">&#39;something&#39;</span>
</pre></div>
</div>
<p>Ideally this would be just syntastic sugar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">x</span><span class="o">.</span><span class="n">y</span><span class="p">():</span>
    <span class="o">...</span>

<span class="c1"># Equals to</span>

<span class="k">def</span> <span class="nf">y</span><span class="p">():</span>
    <span class="o">...</span>
<span class="n">x</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
</pre></div>
</div>
<p>Similar to how decorators are syntastic sugar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@decorate</span>
<span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="o">...</span>

<span class="c1"># Equals to</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="o">...</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">decorate</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="implementation">
<h2><a class="toc-backref" href="#implementation">Implementation</a></h2>
<p>The <cite>__name__</cite> would follow the principles of a normal function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">my_function1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

<span class="k">def</span> <span class="nf">MyClass</span><span class="o">.</span><span class="n">my_function2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="o">...</span>

<span class="k">assert</span> <span class="n">my_function1</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;my_function1&#39;</span>
<span class="k">assert</span> <span class="n">my_function2</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;my_function2&#39;</span>
</pre></div>
</div>
<p>The grammar would use <cite>dotted_name</cite> to support chaining of attributes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">Person</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">value</span>
</pre></div>
</div>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#backwards-compatibility">Backwards Compatibility</a></h2>
<p>This PEP is fully backwards compatible.</p>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright">Copyright</a></h2>
<p>This document has been placed in the public domain.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/pep-0542.txt">https://github.com/python/peps/blob/main/pep-0542.txt</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/pep-0542.txt">2021-02-09 16:54:26 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <p id="toc-title">PEP 542 – Dot Notation Assignment In Function Header</p>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br />
            <a id="source" href="https://github.com/python/peps/blob/main/pep-0542.txt">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
</body>
</html>