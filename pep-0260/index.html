
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <title>PEP 260 – Simplify xrange() | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png"/>
    <link rel="canonical" href="https://peps.python.org/pep-0260.html" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/mq.css" type="text/css" />
    <link rel="stylesheet" href="../_static/dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="css-dark"/>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg" />
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark" />
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <meta name="description" content="Python Enhancement Proposals (PEPs)"/>
</head>
<body>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 260 – Simplify xrange()</li>
            </ul>
            <button aria-label="Toggle dark mode" onClick="toggleColourScheme()"></button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 260 – Simplify xrange()</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">PEP</dt>
<dd class="field-odd">260</dd>
<dt class="field-even">Title</dt>
<dd class="field-even">Simplify xrange()</dd>
<dt class="field-odd">Author</dt>
<dd class="field-odd">guido&#32;&#97;t&#32;python.org (Guido van Rossum)</dd>
<dt class="field-even">Status</dt>
<dd class="field-even">Final</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd">Standards Track</dd>
<dt class="field-even">Created</dt>
<dd class="field-even">26-Jun-2001</dd>
<dt class="field-odd">Python-Version</dt>
<dd class="field-odd">2.2</dd>
<dt class="field-even">Post-History</dt>
<dd class="field-even">26-Jun-2001</dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#problem">Problem</a></li>
<li><a class="reference internal" href="#proposed-solution">Proposed Solution</a></li>
<li><a class="reference internal" href="#scope">Scope</a></li>
<li><a class="reference internal" href="#risks">Risks</a></li>
<li><a class="reference internal" href="#transition">Transition</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract">Abstract</a></h2>
<p>This PEP proposes to strip the <code class="docutils literal notranslate"><span class="pre">xrange()</span></code> object from some rarely
used behavior like <code class="docutils literal notranslate"><span class="pre">x[i:j]</span></code> and <code class="docutils literal notranslate"><span class="pre">x*n</span></code>.</p>
</section>
<section id="problem">
<h2><a class="toc-backref" href="#problem">Problem</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">xrange()</span></code> function has one idiomatic use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">xrange</span><span class="p">(</span><span class="o">...</span><span class="p">):</span> <span class="o">...</span>
</pre></div>
</div>
<p>However, the <code class="docutils literal notranslate"><span class="pre">xrange()</span></code> object has a bunch of rarely used behaviors
that attempt to make it more sequence-like.  These are so rarely
used that historically they have has serious bugs (e.g. off-by-one
errors) that went undetected for several releases.</p>
<p>I claim that it’s better to drop these unused features.  This will
simplify the implementation, testing, and documentation, and
reduce maintenance and code size.</p>
</section>
<section id="proposed-solution">
<h2><a class="toc-backref" href="#proposed-solution">Proposed Solution</a></h2>
<p>I propose to strip the <code class="docutils literal notranslate"><span class="pre">xrange()</span></code> object to the bare minimum.  The
only retained sequence behaviors are <code class="docutils literal notranslate"><span class="pre">x[i]</span></code>, <code class="docutils literal notranslate"><span class="pre">len(x)</span></code>, and <code class="docutils literal notranslate"><span class="pre">repr(x)</span></code>.
In particular, these behaviors will be dropped:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">x[i:j]</span></code> (slicing)</li>
<li><code class="docutils literal notranslate"><span class="pre">x*n</span></code>, <code class="docutils literal notranslate"><span class="pre">n*x</span></code> (sequence-repeat)</li>
<li><code class="docutils literal notranslate"><span class="pre">cmp(x1,</span> <span class="pre">x2)</span></code> (comparisons)</li>
<li><code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">in</span> <span class="pre">x</span></code> (containment test)</li>
<li><code class="docutils literal notranslate"><span class="pre">x.tolist()</span></code> method</li>
<li><code class="docutils literal notranslate"><span class="pre">x.start</span></code>, <code class="docutils literal notranslate"><span class="pre">x.stop</span></code>, <code class="docutils literal notranslate"><span class="pre">x.step</span></code> attributes</li>
</ul>
<p>I also propose to change the signature of the <code class="docutils literal notranslate"><span class="pre">PyRange_New()</span></code> C API
to remove the 4th argument (the repetition count).</p>
<p>By implementing a custom iterator type, we could speed up the
common use, but this is optional (the default sequence iterator
does just fine).</p>
</section>
<section id="scope">
<h2><a class="toc-backref" href="#scope">Scope</a></h2>
<p>This PEP affects the <code class="docutils literal notranslate"><span class="pre">xrange()</span></code> built-in function and the
<code class="docutils literal notranslate"><span class="pre">PyRange_New()</span></code> C API.</p>
</section>
<section id="risks">
<h2><a class="toc-backref" href="#risks">Risks</a></h2>
<p>Somebody’s code could be relying on the extended code, and this
code would break.  However, given that historically bugs in the
extended code have gone undetected for so long, it’s unlikely that
much code is affected.</p>
</section>
<section id="transition">
<h2><a class="toc-backref" href="#transition">Transition</a></h2>
<p>For backwards compatibility, the existing functionality will still
be present in Python 2.2, but will trigger a warning.  A year
after Python 2.2 final is released (probably in 2.4) the
functionality will be ripped out.</p>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright">Copyright</a></h2>
<p>This document has been placed in the public domain.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/pep-0260.txt">https://github.com/python/peps/blob/main/pep-0260.txt</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/pep-0260.txt">2017-11-11 19:28:55 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <p id="toc-title">PEP 260 – Simplify xrange()</p>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#problem">Problem</a></li>
<li><a class="reference internal" href="#proposed-solution">Proposed Solution</a></li>
<li><a class="reference internal" href="#scope">Scope</a></li>
<li><a class="reference internal" href="#risks">Risks</a></li>
<li><a class="reference internal" href="#transition">Transition</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br />
            <a id="source" href="https://github.com/python/peps/blob/main/pep-0260.txt">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
</body>
</html>