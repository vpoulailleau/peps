
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <title>PEP 625 – File name of a Source Distribution | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png"/>
    <link rel="canonical" href="https://peps.python.org/pep-0625.html" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/mq.css" type="text/css" />
    <link rel="stylesheet" href="../_static/dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="css-dark"/>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg" />
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark" />
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <meta name="description" content="Python Enhancement Proposals (PEPs)"/>
</head>
<body>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 625 – File name of a Source Distribution</li>
            </ul>
            <button aria-label="Toggle dark mode" onClick="toggleColourScheme()"></button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 625 – File name of a Source Distribution</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">PEP</dt>
<dd class="field-odd">625</dd>
<dt class="field-even">Title</dt>
<dd class="field-even">File name of a Source Distribution</dd>
<dt class="field-odd">Author</dt>
<dd class="field-odd">Tzu-ping Chung &lt;uranusjr&#32;&#97;t&#32;gmail.com&gt;,
Paul Moore &lt;p.f.moore&#32;&#97;t&#32;gmail.com&gt;</dd>
<dt class="field-even">Discussions-To</dt>
<dd class="field-even"><a class="reference external" href="https://discuss.python.org/t/draft-pep-file-name-of-a-source-distribution/4686">https://discuss.python.org/t/draft-pep-file-name-of-a-source-distribution/4686</a></dd>
<dt class="field-odd">Status</dt>
<dd class="field-odd">Draft</dd>
<dt class="field-even">Type</dt>
<dd class="field-even">Standards Track</dd>
<dt class="field-odd">Created</dt>
<dd class="field-odd">08-Jul-2020</dd>
<dt class="field-even">Post-History</dt>
<dd class="field-even">08-Jul-2020</dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#create-specification-for-sdist-metadata">Create specification for sdist metadata</a></li>
<li><a class="reference internal" href="#use-a-currently-common-sdist-naming-scheme">Use a currently common sdist naming scheme</a></li>
<li><a class="reference internal" href="#augment-a-currently-common-sdist-naming-scheme">Augment a currently common sdist naming scheme</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract">Abstract</a></h2>
<p>This PEP describes a standard naming scheme for a Source Distribution, also
known as an <em>sdist</em>. This scheme distinguishes an sdist from an arbitrary
archive file containing source code of Python packages, and can be used to
communicate information about the distribution to packaging tools.</p>
<p>A standard sdist specified here is a gzipped tar file with a specially
formatted file stem and a <code class="docutils literal notranslate"><span class="pre">.sdist</span></code> suffix. This PEP does not specify the
contents of the tarball.</p>
</section>
<section id="motivation">
<h2><a class="toc-backref" href="#motivation">Motivation</a></h2>
<p>An sdist is a Python package distribution that contains “source code” of the
Python package, and requires a build step to be turned into a wheel on
installation. This format is often considered as an unbuilt counterpart of a
<a class="pep reference internal" href="../pep-0427" title="PEP 427 – The Wheel Binary Package Format 1.0">PEP 427</a> wheel, and given special treatments in various parts of the
packaging ecosystem.</p>
<p>Compared to wheel, however, the sdist is entirely unspecified, and currently
works by convention. The widely accepted format of an sdist is defined by the
implementation of distutils and setuptools, which creates a source code
archive in a predictable format and file name scheme. Installers exploit this
predictability to assign this format certain contextual information that helps
the installation process. pip, for example, parses the file name of an sdist
from a <a class="pep reference internal" href="../pep-0503" title="PEP 503 – Simple Repository API">PEP 503</a> index, to obtain the distribution’s project name and version
for dependency resolution purposes. But due to the lack of specification,
the installer does not have any guarantee as to the correctness of the inferred
message, and must verify it at some point by locally building the distribution
metadata.</p>
<p>This build step is awkward for a certain class of operations, when the user
does not expect the build process to occur. <a class="reference external" href="https://github.com/pypa/pip/issues/8387">pypa/pip#8387</a> describes an
example. The command <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">download</span> <span class="pre">--no-deps</span> <span class="pre">--no-binary=numpy</span> <span class="pre">numpy</span></code> is
expected to only download an sdist for numpy, since we do not need to check
for dependencies, and both the name and version are available by introspecting
the downloaded file name. pip, however, cannot assume the downloaded archive
follows the convention, and must build and check the metadata. For a <a class="pep reference internal" href="../pep-0518" title="PEP 518 – Specifying Minimum Build System Requirements for Python Projects">PEP 518</a>
project, this means running the <code class="docutils literal notranslate"><span class="pre">prepare_metadata_for_build_wheel</span></code> hook
specified in <a class="pep reference internal" href="../pep-0517" title="PEP 517 – A build-system independent format for source trees">PEP 517</a>, which incurs significant overhead.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale">Rationale</a></h2>
<p>By creating a special file name scheme for the sdist format, this PEP frees up
tools from the time-consuming metadata verification step when they only need
the metadata available in the file name.</p>
<p>This PEP also serves as the formal specification to the long-standing
file name convention used by the current sdist implementations. The file name
contains the distribution name and version, to aid tools identifying a
distribution without needing to download, unarchive the file, and perform
costly metadata generation for introspection, if all the information they need
is available in the file name.</p>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification">Specification</a></h2>
<p>The name of an sdist should be <code class="docutils literal notranslate"><span class="pre">{distribution}-{version}.sdist</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">distribution</span></code> is the name of the distribution as defined in <a class="pep reference internal" href="../pep-0345" title="PEP 345 – Metadata for Python Software Packages 1.2">PEP 345</a>,
and normalised according to <a class="pep reference internal" href="../pep-0503" title="PEP 503 – Simple Repository API">PEP 503</a>, e.g. <code class="docutils literal notranslate"><span class="pre">'pip'</span></code>, <code class="docutils literal notranslate"><span class="pre">'flit-core'</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">version</span></code> is the version of the distribution as defined in <a class="pep reference internal" href="../pep-0440" title="PEP 440 – Version Identification and Dependency Specification">PEP 440</a>,
e.g. <code class="docutils literal notranslate"><span class="pre">20.2</span></code>.</li>
</ul>
<p>Each component is escaped according to the same rules as <a class="pep reference internal" href="../pep-0427" title="PEP 427 – The Wheel Binary Package Format 1.0">PEP 427</a>.</p>
<p>An sdist must be a gzipped tar archive that is able to be extracted by the
standard library <code class="docutils literal notranslate"><span class="pre">tarfile</span></code> module with the open flag <code class="docutils literal notranslate"><span class="pre">'r:gz'</span></code>.</p>
</section>
<section id="backwards-compatibility">
<h2><a class="toc-backref" href="#backwards-compatibility">Backwards Compatibility</a></h2>
<p>The new file name scheme should not incur backwards incompatibility in
existing tools. Installers are likely to have already implemented logic to
exclude extensions they do not understand, since they already need to deal
with legacy formats on PyPI such as <code class="docutils literal notranslate"><span class="pre">.rpm</span></code> and <code class="docutils literal notranslate"><span class="pre">.egg</span></code>. They should be able
to correctly ignore files with extension <code class="docutils literal notranslate"><span class="pre">.sdist</span></code>.</p>
<p>pip, for example, skips this extension with the following debug message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Skipping</span> <span class="n">link</span><span class="p">:</span> <span class="n">unsupported</span> <span class="n">archive</span> <span class="nb">format</span><span class="p">:</span> <span class="n">sdist</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">URL</span> <span class="n">to</span> <span class="n">file</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>While setuptools ignores it silently.</p>
</section>
<section id="rejected-ideas">
<h2><a class="toc-backref" href="#rejected-ideas">Rejected Ideas</a></h2>
<section id="create-specification-for-sdist-metadata">
<h3><a class="toc-backref" href="#create-specification-for-sdist-metadata">Create specification for sdist metadata</a></h3>
<p>The topic of creating a trustworthy, standard sdist metadata format as a means
to distinguish sdists from arbitrary archive files has been raised and
discussed multiple times, but has yet to make significant progress due to
the complexity of potential metadata inconsistency between an sdist and a
wheel built from it.</p>
<p>This PEP does not exclude the possibility of creating a metadata specification
for sdists in the future. But by specifying only the file name of an sdist, a
tool can reliably identify an sdist, and perform useful introspection on its
identity, without going into the details required for metadata specification.</p>
</section>
<section id="use-a-currently-common-sdist-naming-scheme">
<h3><a class="toc-backref" href="#use-a-currently-common-sdist-naming-scheme">Use a currently common sdist naming scheme</a></h3>
<p>There is a currently established practice to name an sdist in the format of
<code class="docutils literal notranslate"><span class="pre">{distribution}-{version}.[tar.gz|zip]</span></code>.</p>
<p>Popular source code management services use a similar scheme to name the
downloaded source archive. GitHub, for example, uses <code class="docutils literal notranslate"><span class="pre">distribution-1.0.zip</span></code>
as the archive name containing source code of repository <code class="docutils literal notranslate"><span class="pre">distribution</span></code> on
branch <code class="docutils literal notranslate"><span class="pre">1.0</span></code>. Giving this scheme a special meaning would cause confusion
since a source archive may not a valid sdist.</p>
</section>
<section id="augment-a-currently-common-sdist-naming-scheme">
<h3><a class="toc-backref" href="#augment-a-currently-common-sdist-naming-scheme">Augment a currently common sdist naming scheme</a></h3>
<p>A scheme <code class="docutils literal notranslate"><span class="pre">{distribution}-{version}.sdist.tar.gz</span></code> was raised during the
initial discussion. This was abandoned due to backwards compatibility issues
with currently available installation tools. pip 20.1, for example, would
parse <code class="docutils literal notranslate"><span class="pre">distribution-1.0.sdist.tar.gz</span></code> as project <code class="docutils literal notranslate"><span class="pre">distribution</span></code> with
version <code class="docutils literal notranslate"><span class="pre">1.0.sdist</span></code>. This would cause the sdist to be downloaded, but fail to
install due to inconsistent metadata.</p>
<p>The same problem exists for all common archive suffixes. To avoid confusing
old installers, the sdist scheme must use a suffix that they do not identify
as an archive.</p>
</section>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright">Copyright</a></h2>
<p>This document is placed in the public domain or under the CC0-1.0-Universal
license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/pep-0625.rst">https://github.com/python/peps/blob/main/pep-0625.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/pep-0625.rst">2022-01-16 22:33:05 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <p id="toc-title">PEP 625 – File name of a Source Distribution</p>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#motivation">Motivation</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li><a class="reference internal" href="#rejected-ideas">Rejected Ideas</a><ul>
<li><a class="reference internal" href="#create-specification-for-sdist-metadata">Create specification for sdist metadata</a></li>
<li><a class="reference internal" href="#use-a-currently-common-sdist-naming-scheme">Use a currently common sdist naming scheme</a></li>
<li><a class="reference internal" href="#augment-a-currently-common-sdist-naming-scheme">Augment a currently common sdist naming scheme</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br />
            <a id="source" href="https://github.com/python/peps/blob/main/pep-0625.rst">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
</body>
</html>