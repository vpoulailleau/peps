
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <title>PEP 503 – Simple Repository API | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png"/>
    <link rel="canonical" href="https://peps.python.org/pep-0503.html" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/mq.css" type="text/css" />
    <link rel="stylesheet" href="../_static/dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="css-dark"/>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg" />
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark" />
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <meta name="description" content="Python Enhancement Proposals (PEPs)"/>
</head>
<body>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 503 – Simple Repository API</li>
            </ul>
            <button aria-label="Toggle dark mode" onClick="toggleColourScheme()"></button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 503 – Simple Repository API</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">PEP</dt>
<dd class="field-odd">503</dd>
<dt class="field-even">Title</dt>
<dd class="field-even">Simple Repository API</dd>
<dt class="field-odd">Author</dt>
<dd class="field-odd">Donald Stufft &lt;donald&#32;&#97;t&#32;stufft.io&gt;</dd>
<dt class="field-even">BDFL-Delegate</dt>
<dd class="field-even">Donald Stufft &lt;donald&#32;&#97;t&#32;stufft.io&gt;</dd>
<dt class="field-odd">Discussions-To</dt>
<dd class="field-odd"><a class="reference external" href="mailto:distutils-sig&#37;&#52;&#48;python&#46;org">distutils-sig<span>&#64;</span>python<span>&#46;</span>org</a></dd>
<dt class="field-even">Status</dt>
<dd class="field-even">Accepted</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd">Informational</dd>
<dt class="field-even">Created</dt>
<dd class="field-even">04-Sep-2015</dd>
<dt class="field-odd">Post-History</dt>
<dd class="field-odd">04-Sep-2015</dd>
<dt class="field-even">Resolution</dt>
<dd class="field-even"><a class="reference external" href="https://mail.python.org/pipermail/distutils-sig/2015-September/026899.html">Distutils-SIG</a></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#normalized-names">Normalized Names</a></li>
<li><a class="reference internal" href="#changes">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract">Abstract</a></h2>
<p>There are many implementations of a Python package repository and many tools
that consume them. Of these, the canonical implementation that defines what
the “simple” repository API looks like is the implementation that powers
PyPI. This document will specify that API, documenting what the correct
behavior for any implementation of the simple repository API.</p>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification">Specification</a></h2>
<p>A repository that implements the simple API is defined by its base URL, this is
the top level URL that all additional URLs are below. The API is named the
“simple” repository due to the fact that PyPI’s base URL is
<code class="docutils literal notranslate"><span class="pre">https://pypi.org/simple/</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All subsequent URLs in this document will be relative to this base
URL (so given PyPI’s URL, a URL of <code class="docutils literal notranslate"><span class="pre">/foo/</span></code> would be
<code class="docutils literal notranslate"><span class="pre">https://pypi.org/simple/foo/</span></code>.</p>
</div>
<p>Within a repository, the root URL (<code class="docutils literal notranslate"><span class="pre">/</span></code> for this PEP which represents the base
URL) <strong>MUST</strong> be a valid HTML5 page with a single anchor element per project in
the repository. The text of the anchor tag <strong>MUST</strong> be the name of
the project and the href attribute <strong>MUST</strong> link to the URL for that particular
project. As an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;body&gt;
    &lt;a href=&quot;/frob/&quot;&gt;frob&lt;/a&gt;
    &lt;a href=&quot;/spamspamspam/&quot;&gt;spamspamspam&lt;/a&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
<p>Below the root URL is another URL for each individual project contained within
a repository. The format of this URL is <code class="docutils literal notranslate"><span class="pre">/&lt;project&gt;/</span></code> where the <code class="docutils literal notranslate"><span class="pre">&lt;project&gt;</span></code>
is replaced by the normalized name for that project, so a project named
“HolyGrail” would have a URL like <code class="docutils literal notranslate"><span class="pre">/holygrail/</span></code>. This URL must respond with
a valid HTML5 page with a single anchor element per file for the project. The
href attribute <strong>MUST</strong> be a URL that links to the location of the file for
download, and the text of the anchor tag <strong>MUST</strong> match the final path
component (the filename) of the URL. The URL <strong>SHOULD</strong> include a hash in the
form of a URL fragment with the following syntax: <code class="docutils literal notranslate"><span class="pre">#&lt;hashname&gt;=&lt;hashvalue&gt;</span></code>,
where <code class="docutils literal notranslate"><span class="pre">&lt;hashname&gt;</span></code> is the lowercase name of the hash function (such as
<code class="docutils literal notranslate"><span class="pre">sha256</span></code>) and <code class="docutils literal notranslate"><span class="pre">&lt;hashvalue&gt;</span></code> is the hex encoded digest.</p>
<p>In addition to the above, the following constraints are placed on the API:</p>
<ul>
<li>All URLs which respond with an HTML5 page <strong>MUST</strong> end with a <code class="docutils literal notranslate"><span class="pre">/</span></code> and the
repository <strong>SHOULD</strong> redirect the URLs without a <code class="docutils literal notranslate"><span class="pre">/</span></code> to add a <code class="docutils literal notranslate"><span class="pre">/</span></code> to the
end.</li>
<li>URLs may be either absolute or relative as long as they point to the correct
location.</li>
<li>There are no constraints on where the files must be hosted relative to the
repository.</li>
<li>There may be any other HTML elements on the API pages as long as the required
anchor elements exist.</li>
<li>Repositories <strong>MAY</strong> redirect unnormalized URLs to the canonical normalized
URL (e.g. <code class="docutils literal notranslate"><span class="pre">/Foobar/</span></code> may redirect to <code class="docutils literal notranslate"><span class="pre">/foobar/</span></code>), however clients
<strong>MUST NOT</strong> rely on this redirection and <strong>MUST</strong> request the normalized
URL.</li>
<li>Repositories <strong>SHOULD</strong> choose a hash function from one of the ones
guaranteed to be available via the <code class="docutils literal notranslate"><span class="pre">hashlib</span></code> module in the Python standard
library (currently <code class="docutils literal notranslate"><span class="pre">md5</span></code>, <code class="docutils literal notranslate"><span class="pre">sha1</span></code>, <code class="docutils literal notranslate"><span class="pre">sha224</span></code>, <code class="docutils literal notranslate"><span class="pre">sha256</span></code>, <code class="docutils literal notranslate"><span class="pre">sha384</span></code>,
<code class="docutils literal notranslate"><span class="pre">sha512</span></code>). The current recommendation is to use <code class="docutils literal notranslate"><span class="pre">sha256</span></code>.</li>
<li>If there is a GPG signature for a particular distribution file it <strong>MUST</strong>
live alongside that file with the same name with a <code class="docutils literal notranslate"><span class="pre">.asc</span></code> appended to it.
So if the file <code class="docutils literal notranslate"><span class="pre">/packages/HolyGrail-1.0.tar.gz</span></code> existed and had an
associated signature, the signature would be located at
<code class="docutils literal notranslate"><span class="pre">/packages/HolyGrail-1.0.tar.gz.asc</span></code>.</li>
<li>A repository <strong>MAY</strong> include a <code class="docutils literal notranslate"><span class="pre">data-gpg-sig</span></code> attribute on a file link with
a value of either <code class="docutils literal notranslate"><span class="pre">true</span></code> or <code class="docutils literal notranslate"><span class="pre">false</span></code> to indicate whether or not there is a
GPG signature. Repositories that do this <strong>SHOULD</strong> include it on every link.</li>
<li>A repository <strong>MAY</strong> include a <code class="docutils literal notranslate"><span class="pre">data-requires-python</span></code> attribute on a file
link. This exposes the <em>Requires-Python</em> metadata field, specified in <a class="pep reference internal" href="../pep-0345" title="PEP 345 – Metadata for Python Software Packages 1.2">PEP 345</a>,
for the corresponding release. Where this is present, installer tools
<strong>SHOULD</strong> ignore the download when installing to a Python version that
doesn’t satisfy the requirement. For example:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s2">&quot;...&quot;</span> <span class="n">data</span><span class="o">-</span><span class="n">requires</span><span class="o">-</span><span class="n">python</span><span class="o">=</span><span class="s2">&quot;&amp;gt;=3&quot;</span><span class="o">&gt;...&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>In the attribute value, &lt; and &gt; have to be HTML encoded as <code class="docutils literal notranslate"><span class="pre">&amp;lt;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&amp;gt;</span></code>, respectively.</p>
</li>
</ul>
<section id="normalized-names">
<h3><a class="toc-backref" href="#normalized-names">Normalized Names</a></h3>
<p>This PEP references the concept of a “normalized” project name. As per <a class="pep reference internal" href="../pep-0426" title="PEP 426 – Metadata for Python Software Packages 2.0">PEP 426</a>
the only valid characters in a name are the ASCII alphabet, ASCII numbers,
<code class="docutils literal notranslate"><span class="pre">.</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, and <code class="docutils literal notranslate"><span class="pre">_</span></code>. The name should be lowercased with all runs of the
characters <code class="docutils literal notranslate"><span class="pre">.</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, or <code class="docutils literal notranslate"><span class="pre">_</span></code> replaced with a single <code class="docutils literal notranslate"><span class="pre">-</span></code> character. This
can be implemented in Python with the <code class="docutils literal notranslate"><span class="pre">re</span></code> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>

<span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[-_.]+&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="changes">
<h3><a class="toc-backref" href="#changes">Changes</a></h3>
<ul class="simple">
<li>The optional <code class="docutils literal notranslate"><span class="pre">data-requires-python</span></code> attribute was added in July 2016.</li>
</ul>
</section>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright">Copyright</a></h2>
<p>This document has been placed in the public domain.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/pep-0503.txt">https://github.com/python/peps/blob/main/pep-0503.txt</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/pep-0503.txt">2022-01-21 11:03:51 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <p id="toc-title">PEP 503 – Simple Repository API</p>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#normalized-names">Normalized Names</a></li>
<li><a class="reference internal" href="#changes">Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br />
            <a id="source" href="https://github.com/python/peps/blob/main/pep-0503.txt">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
</body>
</html>