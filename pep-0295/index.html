
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="color-scheme" content="light dark" />
    <title>PEP 295 – Interpretation of multiline string constants | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png"/>
    <link rel="canonical" href="https://peps.python.org/pep-0295.html" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/mq.css" type="text/css" />
    <link rel="stylesheet" href="../_static/dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="css-dark"/>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg" />
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark" />
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <meta name="description" content="Python Enhancement Proposals (PEPs)"/>
</head>
<body>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 295 – Interpretation of multiline string constants</li>
            </ul>
            <button aria-label="Toggle dark mode" onClick="toggleColourScheme()"></button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 295 – Interpretation of multiline string constants</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">PEP</dt>
<dd class="field-odd">295</dd>
<dt class="field-even">Title</dt>
<dd class="field-even">Interpretation of multiline string constants</dd>
<dt class="field-odd">Author</dt>
<dd class="field-odd">yozh&#32;&#97;t&#32;mx1.ru (Stepan Koltsov)</dd>
<dt class="field-even">Status</dt>
<dd class="field-even">Rejected</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd">Standards Track</dd>
<dt class="field-even">Created</dt>
<dd class="field-even">22-Jul-2002</dd>
<dt class="field-odd">Python-Version</dt>
<dd class="field-odd">3.0</dd>
<dt class="field-even">Post-History</dt>
<dd class="field-even"><p></p></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#alternatives">Alternatives</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract">Abstract</a></h2>
<p>This PEP describes an interpretation of multiline string constants
for Python.  It suggests stripping spaces after newlines and
stripping a newline if it is first character after an opening
quotation.</p>
</section>
<section id="rationale">
<h2><a class="toc-backref" href="#rationale">Rationale</a></h2>
<p>This PEP proposes an interpretation of multiline string constants
in Python.  Currently, the value of string constant is all the
text between quotations, maybe with escape sequences substituted,
e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    la-la-la</span>
<span class="sd">    limona, banana</span>
<span class="sd">    &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">g</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;This is </span><span class="se">\</span>
<span class="s2">    string&quot;</span>

<span class="nb">print</span> <span class="nb">repr</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
<span class="nb">print</span> <span class="nb">repr</span><span class="p">(</span><span class="n">g</span><span class="p">())</span>
</pre></div>
</div>
<p>prints:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;</span><span class="se">\n\t</span><span class="s1">la-la-la</span><span class="se">\n\t</span><span class="s1">limona, banana</span><span class="se">\n\t</span><span class="s1">&#39;</span>
<span class="s1">&#39;This is </span><span class="se">\t</span><span class="s1">string&#39;</span>
</pre></div>
</div>
<p>This PEP suggest two things:</p>
<ul class="simple">
<li>ignore the first character after opening quotation, if it is
newline</li>
<li>ignore in string constants all spaces and tabs up to
first non-whitespace character, but no more than current
indentation.</li>
</ul>
<p>After applying this, previous program will print:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;la-la-la</span><span class="se">\n</span><span class="s1">limona, banana</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="s1">&#39;This is string&#39;</span>
</pre></div>
</div>
<p>To get this result, previous programs could be rewritten for
current Python as (note, this gives the same result with new
strings meaning):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;\</span>
<span class="sd">la-la-la</span>
<span class="sd">limona, banana</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">g</span><span class="p">():</span>
  <span class="s2">&quot;This is </span><span class="se">\</span>
<span class="s2">string&quot;</span>
</pre></div>
</div>
<p>Or stripping can be done with library routines at runtime (as
pydoc does), but this decreases program readability.</p>
</section>
<section id="implementation">
<h2><a class="toc-backref" href="#implementation">Implementation</a></h2>
<p>I’ll say nothing about CPython, Jython or Python.NET.</p>
<p>In original Python, there is no info about the current indentation
(in spaces) at compile time, so space and tab stripping should be
done at parse time.  Currently no flags can be passed to the
parser in program text (like <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">xxx</span></code>).  I
suggest enabling or disabling of this feature at Python compile
time depending of CPP flag <code class="docutils literal notranslate"><span class="pre">Py_PARSE_MULTILINE_STRINGS</span></code>.</p>
</section>
<section id="alternatives">
<h2><a class="toc-backref" href="#alternatives">Alternatives</a></h2>
<p>New interpretation of string constants can be implemented with flags
‘i’ and ‘o’ to string constants, like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">i</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">SELECT * FROM car</span>
<span class="s2">WHERE model = &#39;i525&#39;</span>
<span class="s2">&quot;&quot;&quot;</span> <span class="ow">is</span> <span class="ow">in</span> <span class="n">new</span> <span class="n">style</span><span class="p">,</span>

<span class="n">o</span><span class="s2">&quot;&quot;&quot;SELECT * FROM employee</span>
<span class="s2">WHERE birth &lt; 1982</span>
<span class="s2">&quot;&quot;&quot;</span> <span class="ow">is</span> <span class="ow">in</span> <span class="n">old</span> <span class="n">style</span><span class="p">,</span> <span class="ow">and</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">SELECT employee.name, car.name, car.price FROM employee, car</span>
<span class="sd">WHERE employee.salary * 36 &gt; car.price</span>
<span class="sd">&quot;&quot;&quot;</span> <span class="ow">is</span> <span class="ow">in</span> <span class="n">new</span> <span class="n">style</span> <span class="n">after</span> <span class="n">Python</span><span class="o">-</span><span class="n">x</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">z</span> <span class="ow">and</span> <span class="ow">in</span> <span class="n">old</span> <span class="n">style</span> <span class="n">otherwise</span><span class="o">.</span>
</pre></div>
</div>
<p>Also this feature can be disabled if string is raw, i.e. if flag ‘r’
specified.</p>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright">Copyright</a></h2>
<p>This document has been placed in the Public Domain.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/pep-0295.txt">https://github.com/python/peps/blob/main/pep-0295.txt</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/pep-0295.txt">2017-11-11 19:28:55 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <p id="toc-title">PEP 295 – Interpretation of multiline string constants</p>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#implementation">Implementation</a></li>
<li><a class="reference internal" href="#alternatives">Alternatives</a></li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br />
            <a id="source" href="https://github.com/python/peps/blob/main/pep-0295.txt">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
</body>
</html>